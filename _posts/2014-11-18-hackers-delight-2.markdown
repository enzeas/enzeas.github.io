---
layout: post
title:  "Hacker's Delight(2)"
categories: 技巧
tags: "读书笔记" 
---

### 恒等式 ###

1. **-x = ~x+1**
2. **-x = ~(x-1)**
3. **~x = -(x+1)**
4. **-~x = x+1**
5. **~-x = x-1**
6. **x+y = x-~y-1**
7. **x+y = (x^y)+2*(x&y)**
8. **x+y = (x\|y)+(x&y)**
9. **x+y = 2*(x\|y)-(x^y)**
10. **x-y = x+~y+1**
11. **x-y = (x^y)-2*(~x&y)**
12. **x-y = (x&~y)-(~x&y)**
13. **x-y = 2*(x&~y)-(x^y)**
14. **x^y = (x\|y)-(x&y)**
15. **x&~y = (x\|y)-y**
16. **x&~y = x-(x&y)**
17. **~(x-y) = y-x-1**
18. **~(x-y) = ~x+y**
19. **~(x^y) = (x&y)-(x\|y)-1**
20. **~(x^y) = (x&y)+~(x\|y)**
21. **x\|y = (x&~y)+y**
22. **x&y = (~x\|y)-~x**

### 推导 ###

1. 由公式3展开移项可得
2. 由公式1将x用x-1代替可得
3. 计算机原理
4. 将公式3左右加负号可得
5. 将公式2左右取反可得
6. 利用公式1:x+y=x-(-y)=x-(~y+1)=x-~y-1
7. 加法器的构建，忽略进位求和(x^y)加上进位(x&y左移一位)(x与y在此位均为1)
8. 修改加法的操作数，使得任何位上不会发生0+1，而是1+0
9. 公式8乘以2减去公式7
10. 利用公式1:x-y=x+(-y)=x+(~y+1)=x+~y+1
11. 减法器的构建，先忽略借位求差(x^y)再减去借位(~x&y左移一位)(x某位为0而且y此位为1)
12. 修改减法的操作数，使得任何位上不会发生1-1，而是0-0
13. 公式12乘以2减去公式11
14. 显然，一个异或门就是由一个或门、一个与非门，一个与门共三个门组成(x^y=(x\|y)&~(x&y))
15. 2\*(x&~y)=((x^y)+x-y)(公式13)=((x^y)+(x+y)-2\*y)=((x\|y)-(x&y)+(x\|y)-(x&y)-2\*y)(公式8,公式14)=2\*((x\|y)-y)
16. 2\*(x&~y)=((x^y)+x-y)(公式13)=((x^y)+2\*x-(x+y))=((x\|y)-(x&y)+2\*x-(x\|y)-(x&y))=2\*(x-(x&y))
17. ~(x-y)=(-(x-y)-1)(公式3)=(y-x-1)
18. ~(x-y)=(y-x-1)=(y+~x)(公式3)
19. ~(x^y)=(-((x\|y)-(x&y))-1)(公式3)=((x&y)-(x\|y)-1)
20. ~(x^y)=((x&y)-(x\|y)-1)(公式3)=((x&y)+~(x\|y))
21. 2\*(x\|y)=(x+y+(x^y))(公式9)=(x-y+2\*y+(x^y))=(2*(x&~y)-(x^y)+2\*y+(x^y))(公式13)=2\*((x&~y)+y)
22. (~x\|y)=(~x+y-(~x&y))(公式8)=(~x+y-(y-(x&y)))(公式16)=((x&y)+~x) => (x&y)=((~x\|y)-~x)
